<h2>–î–æ–º–∞</h2>
<hr>
<div class="main-div">
    <div class="form-group">
      <table class="search">
      <tr>
        <td class="search-header">–ü–æ–∏—Å–∫</td>
        <td class="search-criteria">
          <ng-select [items]="criteria" [hideSelected]="true" [(ngModel)]="searchCriteria" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –∫—Ä–∏—Ç–µ—Ä–∏–π"
                     (change)="onChangeSelectCriteria($event)" required>
          </ng-select>
        </td>
        <td class="search-text">
          <input type="text" class="form-control" [(ngModel)]="searchText"/>
        </td>

        <td class="search-button">
          <button class="btn btn-primary" (click)="findHouses(searchText)">–ù–∞–π—Ç–∏</button>
        </td>
        <td class="search-button">
          <button class="btn btn-danger" (click)="loadHouses()">–°–±—Ä–æ—Å</button>
        </td>
        <td align="right">
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addHouseModal"
                  (click)="onCreate()">
            ‚ûï –î–æ–±–∞–≤–∏—Ç—å
          </button>
        </td>
      </tr>
      </table>
    </div>

<div class="main-table">
  <table class="table table-bordered table-hover">
    <thead class="table-light">
    <tr>
      <th scope="col">–ù–∞–∑–≤–∞–Ω–∏–µ —É–ª–∏—Ü—ã</th>
      <th scope="col">–ù–æ–º–µ—Ä –¥–æ–º–∞</th>
      <th scope="col">–ß–∏—Å–ª–æ –∫–≤–∞—Ä—Ç–∏—Ä</th>
      <th scope="col">–ß–∏—Å–ª–æ –ø–æ–¥—ä–µ–∑–¥–æ–≤</th>
      <th scope="col">–≠—Ç–∞–∂–Ω–æ—Å—Ç—å</th>
      <th scope="col">–†–∞–π–æ–Ω</th>
      <th scope="col" class="button-column"></th>
      <th scope="col" class="button-column"></th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let house of houses">
      <td id="col1">{{house?.houseId?.street}}</td>
      <td id="col2">{{house?.houseId?.houseNumber}}</td>
      <td id="col3">{{house?.numberOfApartments}}</td>
      <td id="col4">{{house?.numberOfEntraces}}</td>
      <td id="col5">{{house?.numberOfFloors}}</td>
      <td id="col6">{{house?.district?.districtName!}}</td>
      <td id="col7">
        <button type="button" class="btn btn-danger change-btn" (click)="deleteHouse(house?.houseId.street!, house?.houseId.houseNumber!)">
          üóë
        </button>
      </td>
      <td id="col8">
        <button type="button" class="btn btn-warning button-center change-btn" data-bs-toggle="modal" data-bs-target="#addHouseModal"
                (click)="onEdit(house)">
          ‚úè
        </button>
      </td>
    </tr>
    </tbody>
  </table>
</div>


<!-- Modal -->
<div class="modal fade" id="addHouseModal" tabindex="-1" role="dialog" aria-labelledby="addHouseModal"
     aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">{{isUpdate ? '–ò–∑–º–µ–Ω–∏—Ç—å' : '–î–æ–±–∞–≤–∏—Ç—å'}} –∑–∞–ø–∏—Å—å</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
      </div>
      <div class="modal-body">
        <form name="addForm">
          <div class="form-group">
            <label for="add-street" class="col-form-label">–£–ª–∏—Ü–∞:</label>
            <input [(ngModel)]="streeet" name="street" type="text" class="form-control"
                   id="add-street" #street="ngModel" required />
            <div [hidden]="street.valid || street.untouched" class="alert alert-danger">
              –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —É–ª–∏—Ü—ã
            </div>
          </div>
          <div class="form-group">
            <label for="add-houseNumber" class="col-form-label">–ù–æ–º–µ—Ä –¥–æ–º–∞:</label>
            <input [(ngModel)]="houseeNumber" name="houseNumber" type="number" class="form-control"
                   id="add-houseNumber" #houseNumber="ngModel" required />
            <div [hidden]="houseNumber.valid || houseNumber.untouched" class="alert alert-danger">
              –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä –¥–æ–º–∞
            </div>
          </div>
          <div class="form-group">
            <label for="add-apNum" class="col-form-label">–ß–∏—Å–ª–æ –∫–≤–∞—Ä—Ç–∏—Ä:</label>
            <input [(ngModel)]="selectedHouse.numberOfApartments" name="apNum" type="number" class="form-control"
                   id="add-apNum" #apNum="ngModel" required />
            <div [hidden]="apNum.valid || apNum.untouched" class="alert alert-danger">
              –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ –∫–≤–∞—Ä—Ç–∏—Ä
            </div>
          </div>
          <div class="form-group">
            <label for="add-entraces" class="col-form-label">–ß–∏—Å–ª–æ –ø–æ–¥—ä–µ–∑–¥–æ–≤:</label>
            <input [(ngModel)]="selectedHouse.numberOfEntraces" name="entraces" type="number" class="form-control"
                   id="add-entraces" #entraces="ngModel" required />
            <div [hidden]="entraces.valid || entraces.untouched" class="alert alert-danger">
              –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ –ø–æ–¥—ä–µ–∑–¥–æ–≤
            </div>
          </div>
          <div class="form-group">
            <label for="add-floors" class="col-form-label">–≠—Ç–∞–∂–Ω–æ—Å—Ç—å:</label>
            <input [(ngModel)]="selectedHouse.numberOfFloors" name="floors" type="number" class="form-control"
                   id="add-floors" #floors="ngModel" required />
            <div [hidden]="floors.valid || floors.untouched" class="alert alert-danger">
              –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —ç—Ç–∞–∂–Ω–æ—Å—Ç—å
            </div>
          </div>
          <div class="form-group">
            <label>–†–∞–π–æ–Ω:</label>
            <ng-select placeholder="–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–π–æ–Ω" bindLabel="districtName"
                       [items]="districts" (change)="onChangeSelectDistrict($event)">
            </ng-select></div>
        </form>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="isUpdate ? updateHouse() : addHouse()"
                data-bs-dismiss="modal"
                [disabled]="floors.invalid || entraces.invalid || apNum.invalid || houseNumber.invalid ||
                street.invalid">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å
        </button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>

      </div>
    </div>
  </div>
</div>
</div>

