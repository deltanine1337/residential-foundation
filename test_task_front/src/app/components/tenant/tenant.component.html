<h2 style="margin-top: 15px;" align="center">–ñ–∏—Ç–µ–ª–∏</h2>

<div style="width: 95%; margin: 0 auto">
  <div class="form-group" style="width: 100%;">
    <table style="margin-top: 2%; width: 100%">
      <tr>
        <td style="width: 3%">–ü–æ–∏—Å–∫</td>
        <td style="width: 10%">
          <ng-select [items]="criteria" [hideSelected]="true" [(ngModel)]="searchCriteria" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –∫—Ä–∏—Ç–µ—Ä–∏–π"
                     (change)="onChangeSelectCriteria($event)" required>
          </ng-select>
        </td>
        <td style="width: 30%">
          <input type="text" class="form-control" [(ngModel)]="searchText"/>
        </td>

        <td style="width: 5%">
          <button class="btn btn-primary" (click)="findTenants(searchText)">–ù–∞–π—Ç–∏</button>
        </td>
        <td style="width: 5%">
          <button class="btn btn-danger" (click)="loadTenants()">–°–±—Ä–æ—Å</button>
        </td>
        <td align="right">
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addTenantModal"
                  (click)="onCreate()">
            ‚ûï –î–æ–±–∞–≤–∏—Ç—å
          </button>
        </td>
      </tr>
    </table>
  </div>

  <div align="center" style="margin-top: 25px;">
    <table class="table table-bordered table-hover">
      <thead class="table-light">
      <tr>
        <th scope="col" style="width: 20%">–§–ò–û</th>
        <th scope="col" style="width: 10%">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</th>
        <th scope="col" style="width: 10%">–ù–æ–º–µ—Ä –∫–≤–∞—Ä—Ç–∏—Ä—ã</th>
        <th scope="col" style="width: 10%">–î–æ–º</th>
        <th scope="col" style="width: 10%"></th>
        <th scope="col" style="width: 10%"></th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let tenant of tenants">
        <td id="col1">{{tenant?.fio}}</td>
        <td id="col2">{{tenant?.telNum}}</td>
        <td id="col3">{{tenant?.apartmentNumber}}</td>
        <td id="col4">{{tenant?.house?.houseId.street}}, {{tenant?.house?.houseId.houseNumber}}</td>
        <td id="col5">
          <button type="button" class="btn btn-danger" (click)="deleteTenant(tenant.tenantId!)">
            üóë –£–¥–∞–ª–∏—Ç—å
          </button>
        </td>
        <td id="col6">
          <button type="button" class="btn btn-warning button-center" data-bs-toggle="modal" data-bs-target="#addTenantModal"
                  (click)="onEdit(tenant)">
            ‚úè –ò–∑–º–µ–Ω–∏—Ç—å
          </button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>


  <!-- Modal -->
  <div class="modal fade" id="addTenantModal" tabindex="-1" role="dialog" aria-labelledby="addTenantModal"
       aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">{{isUpdate ? '–ò–∑–º–µ–Ω–∏—Ç—å' : '–î–æ–±–∞–≤–∏—Ç—å'}} –∑–∞–ø–∏—Å—å</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
        </div>
        <div class="modal-body">
          <form name="addForm">
            <div class="form-group">
              <label for="add-fio" class="col-form-label">–§–ò–û:</label>
              <input [(ngModel)]="selectedTenant.fio" name="fio" type="text" class="form-control"
                     id="add-fio" #fio="ngModel" required />
              <div [hidden]="fio.valid || fio.untouched" class="alert alert-danger">
                –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –§–ò–û
              </div>
            </div>
            <div class="form-group">
              <label for="add-telNum" class="col-form-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:</label>
              <input [(ngModel)]="selectedTenant.telNum" name="telNum" type="text" maxlength="12" class="form-control"
                     id="add-telNum" #telNum="ngModel" required />
              <div [hidden]="telNum.valid || telNum.untouched" class="alert alert-danger">
                –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞. –§–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞: +7xxxxxxxxxx
              </div>
            </div>
            <div class="form-group">
              <label for="add-apartmentNumber" class="col-form-label">–ù–æ–º–µ—Ä –∫–≤–∞—Ä—Ç–∏—Ä—ã:</label>
              <input [(ngModel)]="selectedTenant.apartmentNumber" name="apartmentNumber" type="number" class="form-control"
                     id="add-apartmentNumber" #apartmentNumber="ngModel" required />
              <div [hidden]="apartmentNumber.valid || apartmentNumber.untouched" class="alert alert-danger">
                –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä –∫–≤–∞—Ä—Ç–∏—Ä—ã
              </div>
            </div>
            <div class="form-group">
              <label>–î–æ–º:</label>
              <ng-select [hideSelected]="true" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–º"
                         (change)="onChangeSelectHouse($event)">
                <ng-option *ngFor="let house of houses" [value]="house">
                  {{house?.houseId!.street}}, {{house?.houseId!.houseNumber}}
                </ng-option>
              </ng-select></div>
          </form>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-primary" (click)="isUpdate ? updateTenant() : addTenant()"
                  data-bs-dismiss="modal"
                  [disabled]="apartmentNumber.invalid || telNum.invalid || fio.invalid">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å
          </button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>

        </div>
      </div>
    </div>
  </div>
</div>
