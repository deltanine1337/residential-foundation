<h2>–ñ–∏—Ç–µ–ª–∏</h2>
<hr>
<div class="main-div">
  <div class="form-group">
    <table class="search">
      <tr>
        <td class="search-header">–ü–æ–∏—Å–∫</td>
        <td class="search-criteria">
          <ng-select [searchable]="false" [items]="criteria" [hideSelected]="true" [(ngModel)]="searchCriteria" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –∫—Ä–∏—Ç–µ—Ä–∏–π"
                     (change)="onChangeSelectCriteria($event)" required>
          </ng-select>
        </td>
        <td class="search-text">
          <input type="text" class="form-control" [(ngModel)]="searchText" (keyup)="findTenants(searchText)"/>
        </td>
        <td class="search-button">
          <button class="btn btn-danger" (click)="loadTenants()">–°–±—Ä–æ—Å</button>
        </td>
        <td align="right">
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addTenantModal"
                  (click)="onCreate()">
            ‚ûï –î–æ–±–∞–≤–∏—Ç—å
          </button>
        </td>
      </tr>
    </table>
  </div>

  <div align="center" class="main-table">
    <table class="table table-bordered table-hover">
      <thead class="table-light">
      <tr>
        <th scope="col">–§–ò–û</th>
        <th scope="col">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</th>
        <th scope="col">–ê–¥—Ä–µ—Å</th>
        <th scope="col" class="button-column"></th>
        <th scope="col" class="button-column"></th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let tenant of tenants">
        <td id="col1">{{tenant?.fio}}</td>
        <td id="col2">{{tenant?.telNum}}</td>
        <td id="col4">—Ä. {{tenant?.house?.district?.districtName}}, —É–ª.{{tenant?.house?.houseId.street}}, –¥.{{tenant?.house?.houseId.houseNumber}}, –∫–≤. {{tenant?.apartmentNumber}}</td>
        <td id="col5">
          <button type="button" class="btn btn-warning button-center change-btn" data-bs-toggle="modal" data-bs-target="#addTenantModal"
                  (click)="onEdit(tenant)">
            ‚úè
          </button>
        </td>
        <td id="col6">
          <button type="button" class="btn btn-danger change-btn" (click)="deleteTenant(tenant.tenantId!)">
            üóë
          </button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>


  <!-- Modal -->
  <div class="modal fade" id="addTenantModal" tabindex="-1" role="dialog" aria-labelledby="addTenantModal"
       aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">{{isUpdate ? '–ò–∑–º–µ–Ω–∏—Ç—å' : '–î–æ–±–∞–≤–∏—Ç—å'}} –∑–∞–ø–∏—Å—å</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
        </div>
        <div class="modal-body">
          <form name="addForm">
            <div class="form-group">
              <label for="add-fio" class="col-form-label">–§–ò–û:</label>
              <input [(ngModel)]="selectedTenant.fio" name="fio" type="text" class="form-control"
                     id="add-fio" #fio="ngModel" required />
              <div [hidden]="fio.valid || fio.untouched" class="alert alert-danger">
                –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –§–ò–û
              </div>
            </div>
            <div class="form-group">
              <label for="add-telNum" class="col-form-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:</label>
              <input [(ngModel)]="selectedTenant.telNum" name="telNum" type="tel" maxlength="12" class="form-control"
                     id="add-telNum" #telNum="ngModel" required />
              <div [hidden]="telNum.valid || telNum.untouched" class="alert alert-danger">
                –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞. –§–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞: +7xxxxxxxxxx
              </div>
            </div>
            <div class="form-group">
              <label for="add-apartmentNumber" class="col-form-label">–ù–æ–º–µ—Ä –∫–≤–∞—Ä—Ç–∏—Ä—ã:</label>
              <input [(ngModel)]="selectedTenant.apartmentNumber" name="apartmentNumber" type="number" class="form-control"
                     id="add-apartmentNumber" #apartmentNumber="ngModel" required />
              <div [hidden]="apartmentNumber.valid || apartmentNumber.untouched" class="alert alert-danger">
                –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä –∫–≤–∞—Ä—Ç–∏—Ä—ã
              </div>
            </div>
            <div class="form-group">
              <label>–î–æ–º:</label>
              <ng-select [searchable]="false" [hideSelected]="true" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–º"
                         (change)="onChangeSelectHouse($event)">
                <ng-option *ngFor="let house of houses" [value]="house">
                  —Ä. {{house?.district?.districtName}}, —É–ª. {{house?.houseId!.street}}, –¥. {{house?.houseId!.houseNumber}}
                </ng-option>
              </ng-select></div>
          </form>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-primary" (click)="isUpdate ? updateTenant() : addTenant()"
                  data-bs-dismiss="modal"
                  [disabled]="apartmentNumber.invalid || telNum.invalid || fio.invalid || !isHouseChanged">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å
          </button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>

        </div>
      </div>
    </div>
  </div>
</div>
